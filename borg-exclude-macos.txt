# These are exclusions for borg backup which are particular to macOS
# Use: borg create --patterns-from=/path/to/borg-exclude.txt

# N.B. --patterns-from uses the shell style of patterns by default NOT the fn
# Shell style counts ** as any character (including path separators)

# A directory exclusion pattern can end either with or without a slash (‘/’).
# If it ends with a slash, such as some/path/, the directory will be included but not its content.
# If it does not end with a slash, such as some/path, both the directory and content will be excluded.
# A minus sign will exclude, but still recurse into the directory to find inclusions (slow)
# A bang/exclamation point will _not_ recurse into a directory, and thus no inclusion rules will kick in (dangerous)

# N.B. Other directories will be ignored if a file '.nobackup' is present and '--exclude-if-present .nobackup' is used

# Cache items that will be rebuilt by the machine
! **/.build/
! **/.cache/
! **/.Cache/
! **/.caches/
! **/.Caches/
! **/.DocumentRevisions-V100/
! **/.DS_Store
! **/.hotfiles.btree
! **/.Spotlight-V100/
! **/.TemporaryItems/
! **/Cache/
! **/cache/
! **/Caches/
! **/caches/
! **/iTunes/Album Artwork/
! **/Library/Metadata
! **/Library/Metadata/CoreSpotlight/index.spotlightV3/
! **/private/var/folders
! **/System/Library/Caches/
! **/tmp/
! /var/tmp/

# Specific cache items
## These are thumbnails and resized images which will be rebuilt if missing
! **/Users/*/Pictures/Photos Library.photoslibrary/resources
## These seem to be related to macOS ML caching
! **/Library/Trial

# Things deleted by user (these should have been picked up in an earlier backup anyway)
# N.B. Omitting the trashes will leave you open to creating something, trashing it before a backup is made, and then having a disaster
! **/.Trash/
! **/.trash/
! **/.Trashes/
! **/.trashes/

# Logs and Monitoring
- **/Logs/
- **/node_modules/

# Backup items
- **/.com.apple.backupd.mvlist.plist
- **/Backups.backupdb

# macOS installation files
## These are large and don't need to be restored
## We use ** here because macOS will use System/Volumes/Data/Applications/ as well
## You could just exclude both, as the deduplication would take care of it, but faster to skip
! **/Applications/Install macOS**

# Unknown and Misc
- **/.fseventsd/
- **/.MobileBackups.trash/
- **/.MobileBackups/
- **/CrashReporter/
- **/DerivedData/
- **/iTunes/iTunes Media/Downloads/
- **/iTunes/iTunes Media/Podcasts/
- **/iTunes/Previous iTunes Libraries/
- **/MobileBackups.trash/
- **/MobileSync/Backup/
- /dev/
- /proc/
- /run/
- /sys/
- /tmp/
- /var/backups/
